import{a as v}from"/build/_shared/chunk-KQRYTGQX.js";import{a as x,b as V}from"/build/_shared/chunk-XCJPTF5P.js";import{a as K}from"/build/_shared/chunk-5HMOD2E3.js";import{a as J}from"/build/_shared/chunk-3RGK6QCO.js";import{a as R}from"/build/_shared/chunk-GDYDJZ4T.js";import{a as A,f as k,g as D,h as F,j as L,k as j,n as G}from"/build/_shared/chunk-DLPA6FWQ.js";import{a as O}from"/build/_shared/chunk-BARSUFJY.js";import"/build/_shared/chunk-J5FUJS46.js";import{a as y,g as S,k as C,l as I,p as n}from"/build/_shared/chunk-CU65WYAZ.js";import{c as t}from"/build/_shared/chunk-Q3IECNXJ.js";var b=t(n(),1);function X(){return(0,b.jsx)("div",{className:"absolute right-16 max-lg:top-10 top-5 px-4 py-2 rounded-lg w-1/12 text-center",children:(0,b.jsxs)(S,{to:"/about",className:"text-indigo-500 text-xl font-semibold flex items-center gap-x-3",children:[(0,b.jsx)(L,{className:"size-6"}),"About"]})})}var U=X;var p=t(n(),1);function Z({children:e}){return(0,p.jsxs)("div",{className:"mt-16 text-center",children:[(0,p.jsxs)("div",{className:"flex justify-center text-white mb-10 space-x-5",children:[(0,p.jsx)("h1",{className:"font-extrabold text-4xl",children:"Account Settings"}),(0,p.jsx)(k,{className:"size-12 hover:animate-spin"})]}),(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:e})]})}var z=Z;var w=t(y(),1);var o=t(n(),1);function ee({actionData:e}){let[i]=(0,w.useState)(e?.errors||{}),[f]=(0,w.useState)(e?.error||""),[g,l]=(0,w.useState)(!1),[c,s]=(0,w.useState)(!1),[a,h]=(0,w.useState)({currentPassword:e?.fields?.currentPassword||"",newPassword:e?.fields?.newPassword||"",confirmNewPassword:e?.fields?.confirmNewPassword||""});function P(u,W){h(Y=>({...Y,[W]:u.target.value}))}function _(){l(!0)}return(0,o.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[(0,o.jsx)("h2",{className:"text-lg font-medium text-gray-300 mb-4",children:"Change Password"}),(0,o.jsxs)("form",{method:"post",className:"space-y-6",onSubmit:()=>_(),children:[f&&(0,o.jsx)("div",{className:"text-sm font-semibold text-center text-red-500",children:f}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(x,{htmlFor:"currentPassword",label:"Current Password",value:a.currentPassword,onChange:u=>P(u,"currentPassword"),error:i?.currentPassword,type:c?"text":"password"}),(0,o.jsx)("button",{type:"button",onClick:()=>s(u=>!u),className:"absolute inset-y-11 right-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",children:c?(0,o.jsx)(F,{className:"size-6"}):(0,o.jsx)(D,{className:"size-6"})})]}),(0,o.jsx)(x,{htmlFor:"newPassword",label:"New Password",value:a.newPassword,onChange:u=>P(u,"newPassword"),error:i?.newPassword,type:c?"text":"password"}),(0,o.jsx)(x,{htmlFor:"confirmNewPassword",label:"Confirm New Password",value:a.confirmNewPassword,onChange:u=>P(u,"confirmNewPassword"),error:i?.passwordConfirm,type:c?"text":"password"}),(0,o.jsx)("button",{type:"submit",disabled:g,className:`w-full px-4 py-2 bg-indigo-500 text-white font-semibold rounded-lg shadow hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-400 ${g&&"cursor-not-allowed bg-indigo-700"}`,children:g?"Updating...":"Update Password"})]})]})}var E=ee;var N=t(y(),1);var te=["public/static/first1.png","/second.jpeg","/public/static/third.jpeg","/static/fourth.jpeg","/static/fifth.jpeg","/static/sixth.jpeg","/static/seventh.jpeg","/static/eighth.jpeg","/public/ninth.jpeg"],$=te;var d=t(n(),1);function re({selectedPicture:e,isOpen:i,onClose:f,onSelect:g,unlocked:l}){if(!i)return null;let c=s=>s<2&&l>=1||s<4&&l>=4||s<6&&l>=6||s<8&&l>=9||s<9&&l>=10;return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-modal":"true",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-md shadow-xl",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Select Your Profile Picture"}),(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[$.map((s,a)=>(0,d.jsx)("button",{disabled:s===e||!c(a),onClick:()=>{g(s),f()},className:`focus:outline-none border-2 border-transparent rounded-lg transition duration-200 ${c(a)?"hover:border-indigo-500":"cursor-not-allowed opacity-50"}`,children:(0,d.jsx)("img",{src:`${s}`,alt:`Profile ${a+1}`,className:"rounded-lg"})},a)),(0,d.jsx)("img",{src:v,alt:`Profile ${v}`,className:"rounded-lg"})]}),(0,d.jsx)("button",{onClick:f,className:"mt-4 w-full bg-indigo-400 text-white py-2 px-4 rounded-lg hover:bg-indigo-500 transition duration-200",children:"Cancel"})]})})}var M=re;var r=t(n(),1);function oe({data:e}){let[i,f]=(0,N.useState)(e.profileImg),[g,l]=(0,N.useState)(!1),c=new Date(e.user.createdAt).toLocaleDateString("de-DE"),s=async a=>{f(a);try{if(!(await fetch("/api/profile-img",{method:"POST",body:new URLSearchParams({profileImg:a})})).ok){console.error("Failed to upload profile image!");return}}catch(h){console.error(h)}};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-10 mt-12 md:space-x-10 md:flex-row-reverse",children:[(0,r.jsxs)("div",{className:"relative flex-shrink-0",children:[e.user.unlockedRewards>=3&&(0,r.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent before:absolute before:inset-0 before:rounded-full before:border-[6px] before:border-transparent before:bg-gradient-to-r before:from-blue-500 before:to-purple-500 before:animate-neon-glow before:blur-md"}),(0,r.jsx)("img",{src:i,alt:e.user.username[0],className:`relative h-52 w-52 bg-indigo-500 rounded-full flex items-center justify-center text-white font-bold text-4xl ${e.user.unlockedRewards>=3?"z-10":""}`}),(0,r.jsx)("button",{onClick:()=>l(!0),className:"absolute bottom-4 right-4 z-20 bg-indigo-600 p-2 rounded-full text-white shadow-md hover:bg-indigo-700 transition duration-200",children:(0,r.jsx)(j,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"space-y-6 text-center md:text-left",children:[(0,r.jsx)("h1",{className:`font-extrabold text-4xl ${e.user.unlockedRewards>=2?"bg-clip-text text-transparent bg-[linear-gradient(to_right,theme(colors.indigo.400),theme(colors.indigo.100),theme(colors.sky.400),theme(colors.fuchsia.400),theme(colors.sky.400),theme(colors.indigo.100),theme(colors.indigo.400))] bg-[length:200%_auto] animate-gradient":"text-white"}`,children:e.user.username}),(0,r.jsx)("h3",{className:"font-medium text-lg text-indigo-300",children:e.user.email}),(0,r.jsxs)("p",{className:"text-lg text-gray-300",children:[e.user.points," points"]}),(0,r.jsxs)("p",{className:"flex items-center justify-center md:justify-start gap-x-2 text-lg text-gray-300",children:[e.user.coins,(0,r.jsx)(A,{className:"size-5 text-indigo-500",title:"Coins earned"})]}),(0,r.jsxs)("h2",{className:"text-gray-400 text-lg",children:["Member of the community since"," ",(0,r.jsx)("span",{className:"font-semibold text-white",children:c})]})]}),(0,r.jsx)(M,{selectedPicture:i,isOpen:g,onClose:()=>l(!1),onSelect:s,unlocked:e.user.unlockedRewards})]})}var q=oe;var Q=t(G(),1),T=t(K(),1),B=t(J(),1),H=t(V(),1),m=t(n(),1);function se(){let e=C(),i=I();return(0,m.jsxs)(O,{children:[(0,m.jsx)(R,{}),(0,m.jsx)(U,{}),(0,m.jsx)(q,{data:e}),(0,m.jsx)(z,{children:(0,m.jsx)(E,{actionData:i})})]})}var ne=se;export{ne as default};
